(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{330:function(t,e,n){"use strict";n.r(e);n(274);var main=n(278),l=n(269),c=n(306),o=n(307),d=n(308),r=n(287),v=n(288),h=(n(291),{layout:"lk",components:{FullCalendar:main.a,Datetime:v.Datetime},data:function(){return{newEvents:[{id:"5",title:"Консультация",start:"2020-06-07T08:00:00",end:"2020-06-07T09:00:00",extendedProps:{patient_id:"1",icon:"microphone",branch:"",place:""}},{id:"6",title:"Какое-то событие",start:"2020-06-06T14:00:00",end:"2020-06-06T14:30:00",extendedProps:{patient_id:"1",icon:"clinic-medical",branch:"филиал",place:"кабинет"}}],calendarKey:"",schedule:{start:"07:00",end:"20:00",minTime:"07:00",maxTime:"20:00"},event:{start:"",end:""},selectedDate:null,selectedEvent:null,checkedEvent:"",toCard:!0,calendarOptions:{plugins:[l.b,c.a,o.a,d.a],locale:r.a,height:615,headerToolbar:{left:"prev",center:"title",right:"next"},initialView:"timeGridWeek",rerenderDelay:500,weekends:!0,allDaySlot:!1,slotDuration:"00:15:00",slotMinTime:"07:00",slotMaxTime:"20:00",slotLabelInterval:"00:30",slotLabelFormat:{hour:"numeric",minute:"numeric"},slotEventOverlap:!1,eventColor:"#057436",events:[{start:"2020-06-04T08:00:00",end:"2020-06-04T16:00:00",display:"background",backgroundColor:"purple"},{start:"2020-06-05T12:00:00",end:"2020-06-05T20:00:00",display:"background",backgroundColor:"green"},{id:"1",title:"Консультация",start:"2020-06-17T08:00:00",end:"2020-06-17T09:00:00",extendedProps:{patient_id:"1",icon:"microphone",branch:"",place:""}},{id:"2",title:"2",start:"2020-06-17T14:00:00",end:"2020-06-17T14:20:00",extendedProps:{patient_id:"1",icon:"video",branch:"",place:""}},{id:"3",title:"3",start:"2020-06-18T09:00:00",end:"2020-06-18T11:15:00",extendedProps:{patient_id:"1",icon:"clinic-medical",branch:"филиал",place:"кабинет"}},{id:"4",title:"4",start:"2020-06-18T14:00:00",end:"2020-06-18T15:20:00",extendedProps:{patient_id:"1",icon:"clinic-medical",branch:"филиал",place:"кабинет"}}],eventClick:this.handleEventClick,windowResize:this.handleWindowResize}}},computed:{validAddEventForm:function(){return""===this.checkedEvent||""===this.event.end}},mounted:function(){this.handleWindowResize()},methods:{showSettings:function(){this.$modal.show("settings")},hideSettings:function(){this.$modal.hide("settings")},saveSettings:function(){this.calendarOptions.slotMinTime=this.schedule.start.slice(11,16),this.calendarOptions.slotMaxTime=this.schedule.end.slice(11,16),this.calendarKey=this.schedule.start+this.schedule.end,this.hideSettings()},showEvent:function(){this.$modal.show("event")},hideEvent:function(){this.$modal.hide("event")},beforeOpenEventSettings:function(t){this.toCard=!1,this.event.start="",this.event.end=""},showEventSettings:function(){this.$modal.show("event-settings")},hideEventSettings:function(){this.$modal.hide("event-settings")},removeEvent:function(){for(var i=0;i<this.calendarOptions.events.length;i++)this.calendarOptions.events[i].id===this.selectedEvent.id&&this.calendarOptions.events.splice(i,1);this.calendarKey=this.selectedEvent.id,this.toCard=!0,this.hideEvent()},saveEvent:function(){var t=this,e=this.calendarOptions.events.find((function(e){return e.id===t.selectedEvent.id}));e&&(this.calendarOptions.events[e.id-1].start=this.event.start,this.calendarOptions.events[e.id-1].end=this.event.end,this.calendarKey=this.event.start+this.event.end,this.toCard=!0,this.hideEvent())},beforeOpenWaitingList:function(){this.event.end=""},showWaitingList:function(){this.$modal.show("waiting-list")},hideWaitingList:function(){this.$modal.hide("waiting-list")},saveFromList:function(){for(var i=0;i<this.newEvents.length;i++)this.newEvents[i].id===this.checkedEvent.id&&this.newEvents.splice(i,1);this.checkedEvent.start=this.event.start,this.checkedEvent.end=this.event.end,this.calendarKey=this.event.start+this.event.end,this.calendarOptions.events.push(this.checkedEvent),this.checkedEvent="",this.hideWaitingList()},handleDateClick:function(t){this.event.start=t.dateStr,this.showWaitingList()},handleEventClick:function(t){this.showEvent(),this.selectedEvent=t.event;var e=this.$refs.fullCalendar.getApi().getEventById(t.event.id);this.event.start=new Date(e.start).toISOString(),this.event.end=new Date(e.end).toISOString()},handleWindowResize:function(){window.innerWidth<=768?(this.calendarOptions.initialView="timeGridDay",this.calendarKey=window.innerWidth):(this.calendarOptions.initialView="timeGridWeek",this.calendarKey=window.innerWidth)}}}),m=n(28),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"md:mb-5"},[t._v("\n    Расписание\n    "),n("button",{staticClass:"ml-auto",on:{click:t.showSettings}},[n("font-awesome-icon",{attrs:{icon:"cog",size:"xs"}})],1)]),t._v(" "),n("FullCalendar",{key:t.calendarKey,ref:"fullCalendar",attrs:{options:t.calendarOptions},scopedSlots:t._u([{key:"eventContent",fn:function(e){return[n("div",{staticClass:"flex flex-col"},[n("div",{staticClass:"flex px-1 pt-1 items-center"},[n("font-awesome-icon",{attrs:{icon:e.event.extendedProps.icon}}),t._v(" "),n("b",{staticClass:"ml-2"},[t._v(t._s(e.timeText))])],1)])]}}])}),t._v(" "),n("modal",{attrs:{name:"settings",width:300,height:"auto",adaptive:!0}},[n("div",{staticClass:"flex flex-col w-full h-full p-2"},[n("div",{staticClass:"flex"},[n("span",{staticClass:"font-medium mb-8"},[t._v("Настройки рабочего времени")]),t._v(" "),n("font-awesome-icon",{staticClass:"cursor-pointer ml-auto",attrs:{icon:"times"},on:{click:t.hideSettings}})],1),t._v(" "),n("div",{staticClass:"flex flex-col justify-between"},[n("div",[n("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs mb-2",attrs:{for:"begin"}},[t._v("\n            Начало рабочего дня\n          ")]),t._v(" "),n("div",{staticClass:"relative mb-4"},[n("datetime",{staticClass:"theme",attrs:{type:"time","input-class":"input w-full",placeholder:"Выберите дату","value-zone":"Europe/Moscow",phrases:{ok:"Ок",cancel:"Отмена"},"minute-step":5,"min-datetime":t.schedule.minTime,"max-datetime":t.schedule.maxTime,auto:""},model:{value:t.schedule.start,callback:function(e){t.$set(t.schedule,"start",e)},expression:"schedule.start"}})],1),t._v(" "),n("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs mb-2",attrs:{for:"end"}},[t._v("\n            Конец рабочего дня\n          ")]),t._v(" "),n("div",{staticClass:"relative mb-4"},[n("datetime",{staticClass:"theme",attrs:{type:"time","input-class":"input w-full",placeholder:"Выберите дату","value-zone":"Europe/Moscow",phrases:{ok:"Ок",cancel:"Отмена"},"minute-step":5,"min-datetime":t.schedule.minTime,"max-datetime":t.schedule.maxTime,auto:""},model:{value:t.schedule.end,callback:function(e){t.$set(t.schedule,"end",e)},expression:"schedule.end"}})],1)]),t._v(" "),n("div",[n("button",{staticClass:"btn btn-primary w-full",on:{click:t.saveSettings}},[t._v("\n            Сохранить\n          ")])])])])]),t._v(" "),n("modal",{attrs:{name:"event",width:400,height:"auto",adaptive:!0}},[n("div",{staticClass:"flex flex-col w-full h-full p-2 text-xs md:text-base"},[n("div",{staticClass:"flex"},[n("span",{staticClass:"font-medium mb-8"},[t._v("Информация о событии")]),t._v(" "),n("font-awesome-icon",{staticClass:"cursor-pointer ml-auto",attrs:{icon:"times"},on:{click:t.hideEvent}})],1),t._v(" "),n("div",{staticClass:"flex justify-between font-medium"},[n("div",{staticClass:"px-2"},[t._v("17 июня 11:30-12:30")]),t._v(" "),n("div",{staticClass:"flex items-center px-2"},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"video"}}),t._v("\n          Видеоконференция\n        ")],1),t._v(" "),n("div",{staticClass:"px-2"},[t._v("Цена не указана")])]),t._v(" "),n("hr",{staticClass:"py-2"}),t._v(" "),n("div",{staticClass:"flex justify-between mb-4"},[n("div",{staticClass:"flex flex-col px-2"},[n("span",[t._v("Лайт пер. Гостиный, д.5/1")]),t._v(" "),n("i",[t._v("Консультация терапевта")])]),t._v(" "),n("div",{staticClass:"flex flex-col px-2"},[n("span",[t._v("Терентьев Алексей Евгеньевич")]),t._v(" "),n("span",[t._v("17.11.1992")])]),t._v(" "),n("div"),t._v(" "),n("div",{staticClass:"flex flex-col justify-center px-2"},[n("button",{staticClass:"btn-small btn-secondary mb-2"},[n("font-awesome-icon",{attrs:{icon:"comments"}}),t._v("\n            Написать\n          ")],1),t._v(" "),n("button",{staticClass:"btn-small btn-secondary"},[n("font-awesome-icon",{attrs:{icon:"phone"}}),t._v("\n            Позвонить\n          ")],1)])]),t._v(" "),n("div",{staticClass:"text-primary mb-4"},[t._v("\n        Ожидает подтверждения\n      ")]),t._v(" "),n("div",{staticClass:"flex items-center justify-between"},[n("div",[n("button",{staticClass:"btn btn-error w-full mb-2",on:{click:t.removeEvent}},[t._v("\n            Отменить\n          ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary w-full mb-2",on:{click:t.saveEvent}},[t._v("\n            Подтвердить\n          ")]),t._v(" "),n("button",{staticClass:"btn btn-primary w-full",on:{click:t.saveEvent}},[t._v("\n            Перейти к приему\n          ")])])])])]),t._v(" "),n("modal",{attrs:{name:"event-settings",width:300,height:"auto",adaptive:!0},on:{"before-open":t.beforeOpenEventSettings}},[n("div",{staticClass:"flex flex-col w-full h-full p-2"},[n("div",{staticClass:"flex"},[n("span",{staticClass:"font-medium mb-8"},[t._v("Настройки события")]),t._v(" "),n("font-awesome-icon",{staticClass:"cursor-pointer ml-auto",attrs:{icon:"times"},on:{click:t.hideEventSettings}})],1),t._v(" "),n("div",{staticClass:"flex flex-col justify-between"},[n("div",[n("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs mb-2",attrs:{for:"begin"}},[t._v("\n            Начало события\n          ")]),t._v(" "),n("div",{staticClass:"relative mb-4"},[n("datetime",{staticClass:"theme",attrs:{type:"datetime","input-class":"input w-full",placeholder:"Выберите дату","value-zone":"Europe/Moscow",phrases:{ok:"Ок",cancel:"Отмена"},"minute-step":5,"min-datetime":(new Date).toISOString(),auto:""},model:{value:t.event.start,callback:function(e){t.$set(t.event,"start",e)},expression:"event.start"}})],1),t._v(" "),n("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs mb-2",attrs:{for:"end"}},[t._v("\n            Конец события\n          ")]),t._v(" "),n("div",{staticClass:"relative mb-4"},[n("datetime",{staticClass:"theme",attrs:{type:"datetime","input-class":"input w-full",placeholder:"Выберите дату","value-zone":"Europe/Moscow",phrases:{ok:"Ок",cancel:"Отмена"},"minute-step":5,"min-datetime":(new Date).toISOString(),auto:""},model:{value:t.event.end,callback:function(e){t.$set(t.event,"end",e)},expression:"event.end"}})],1)]),t._v(" "),n("div",[n("button",{staticClass:"btn btn-error w-full mb-2",on:{click:t.removeEvent}},[t._v("\n            Отменить\n          ")]),t._v(" "),n("button",{staticClass:"btn btn-primary w-full",on:{click:t.saveEvent}},[t._v("\n            Сохранить\n          ")])])])])]),t._v(" "),n("modal",{attrs:{name:"waiting-list",width:400,height:"auto",adaptive:!0},on:{"before-open":t.beforeOpenWaitingList}},[n("div",{staticClass:"flex flex-col w-full h-full p-2"},[n("div",{staticClass:"flex"},[n("span",{staticClass:"font-medium mb-8"},[t._v("Лист ожидания")]),t._v(" "),n("font-awesome-icon",{staticClass:"cursor-pointer ml-auto",attrs:{icon:"times"},on:{click:t.hideWaitingList}})],1),t._v(" "),n("div",{staticClass:"flex flex-col justify-between"},[n("div",{staticClass:"flex flex-col mb-4"},[0!==t.newEvents.length?n("div",{staticClass:"flex flex-col mb-4"},t._l(t.newEvents,(function(e){return n("label",{key:e.id},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedEvent,expression:"checkedEvent"}],staticClass:"mr-2",attrs:{id:e.id,type:"radio"},domProps:{value:e,checked:t._q(t.checkedEvent,e)},on:{change:function(n){t.checkedEvent=e}}}),t._v(" "),n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:e.extendedProps.icon}}),t._v("\n              Имя пациента "+t._s(e.id)+"\n            ")],1)})),0):n("div",[t._v("Нет записей")]),t._v(" "),t.checkedEvent?n("div",[n("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs mb-2",attrs:{for:"begin"}},[t._v("\n              Начало события\n            ")]),t._v(" "),n("div",{staticClass:"relative mb-4"},[n("datetime",{staticClass:"theme",attrs:{type:"datetime","input-class":"input w-full",placeholder:"Выберите дату","value-zone":"Europe/Moscow",phrases:{ok:"Ок",cancel:"Отмена"},"minute-step":5,"min-datetime":(new Date).toISOString(),auto:""},model:{value:t.event.start,callback:function(e){t.$set(t.event,"start",e)},expression:"event.start"}})],1),t._v(" "),n("label",{staticClass:"block uppercase tracking-wide text-gray-700 text-xs mb-2",attrs:{for:"end"}},[t._v("\n              Конец события\n            ")]),t._v(" "),n("div",{staticClass:"relative mb-4"},[n("datetime",{staticClass:"theme",attrs:{type:"datetime","input-class":"input w-full",placeholder:"Выберите дату","value-zone":"Europe/Moscow",phrases:{ok:"Ок",cancel:"Отмена"},"minute-step":5,"min-datetime":t.event.start,auto:""},model:{value:t.event.end,callback:function(e){t.$set(t.event,"end",e)},expression:"event.end"}})],1)]):t._e()]),t._v(" "),n("div",[n("button",{staticClass:"btn btn-primary w-full",attrs:{disabled:t.validAddEventForm},on:{click:t.saveFromList}},[t._v("\n            Записать\n          ")])])])])])],1)}),[],!1,null,null,null);e.default=component.exports}}]);