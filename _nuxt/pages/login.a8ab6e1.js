(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{321:function(e,t,o){"use strict";o.r(t);o(29);var n=o(2),r=o(267),l=o.n(r),c=(o(268),{components:{VuePhoneNumberInput:l.a},data:function(){return{withPhone:!1,validPhone:!1,email:null,phone:null,formattedPhone:null,password:null}},methods:{isValidPhone:function(e){this.validPhone=!1,e.isValid&&(this.formattedPhone=e.formattedNumber,this.validPhone=!0)},login:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.withPhone,t.next=!0===t.t0?3:!1===t.t0?19:31;break;case 3:if(!e.validPhone){t.next=17;break}return t.prev=4,o={phone:e.formattedPhone,password:e.password},t.next=8,e.$store.dispatch("auth/login",o);case 8:e.$toast.success("Вход успешно выполнен",{position:"bottom-center",duration:2e3}),e.$router.push("/lk"),t.next=15;break;case 12:t.prev=12,t.t1=t.catch(4),e.$toast.error("Ошибка",{position:"bottom-center",duration:2e3});case 15:t.next=18;break;case 17:e.$toast.error("Неверный номер",{position:"bottom-center",duration:2e3});case 18:return t.abrupt("break",31);case 19:return t.prev=19,n={email:e.email,password:e.password},t.next=23,e.$store.dispatch("auth/login",n);case 23:e.$toast.success("Вход успешно выполнен",{position:"bottom-center",duration:2e3}),e.$router.push("/lk"),t.next=30;break;case 27:t.prev=27,t.t2=t.catch(19),e.$toast.error("Ошибка",{position:"bottom-center",duration:2e3});case 30:return t.abrupt("break",31);case 31:case"end":return t.stop()}}),t,null,[[4,12],[19,27]])})))()}}}),d=o(28),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"flex flex-auto text-gray-700"},[o("div",{staticClass:"container px-5 py-2 mx-auto flex justify-center items-center"},[o("form",{staticClass:"bg-gray-300 rounded-lg shadow-md p-2 md:p-8 flex flex-col",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[o("h2",{staticClass:"mb-5"},[e._v("\n        Вход\n      ")]),e._v(" "),e.withPhone?o("VuePhoneNumberInput",{staticClass:"mb-4",attrs:{id:"tel",autocomplete:"tel",color:"#48bb78","default-country-code":"RU","no-country-selector":"",translations:{phoneNumberLabel:"Телефон",example:"Пример:"},required:!0},on:{update:e.isValidPhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}):o("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input",attrs:{id:"email",autocomplete:"email",placeholder:"Почта *",type:"email",pattern:"[^@\\s]+@[^@\\s]+\\.[^@\\s]+",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{id:"current-password",autocomplete:"current-password",placeholder:"Пароль *",type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),o("label",{staticClass:"flex justify-center items-center cursor-pointer mb-4",attrs:{for:"toogle"}},[o("div",{staticClass:"relative"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.withPhone,expression:"withPhone"}],staticClass:"hidden",attrs:{id:"toogle",type:"checkbox"},domProps:{checked:Array.isArray(e.withPhone)?e._i(e.withPhone,null)>-1:e.withPhone},on:{change:function(t){var o=e.withPhone,n=t.target,r=!!n.checked;if(Array.isArray(o)){var l=e._i(o,null);n.checked?l<0&&(e.withPhone=o.concat([null])):l>-1&&(e.withPhone=o.slice(0,l).concat(o.slice(l+1)))}else e.withPhone=r}}}),e._v(" "),o("div",{staticClass:"toggle__line w-6 h-3 bg-gray-400 rounded-full shadow-inner"}),e._v(" "),o("div",{staticClass:"toggle__dot absolute w-3 h-3 bg-white rounded-full shadow"})]),e._v(" "),o("div",{staticClass:"ml-3 text-gray-700"},[e._v("\n          с помощью телефона\n        ")])]),e._v(" "),o("button",{staticClass:"btn btn-primary text-lg mb-5 focus:outline-none"},[e._v("\n        Войти\n      ")]),e._v(" "),o("p",{staticClass:"flex justify-between text-xs text-gray-500 mt-3"},[o("nuxt-link",{attrs:{to:"/recovery"}},[e._v("Забыли пароль?")]),e._v(" "),o("nuxt-link",{attrs:{to:"/registration"}},[e._v("Регистрация")])],1)],1)])])}),[],!1,null,null,null);t.default=component.exports}}]);